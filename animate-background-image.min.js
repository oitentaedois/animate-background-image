!function(){"use strict";function a(a,b){return a?(this.element=a,this.visibleFrame=0,this.framesUrls=[],this.frames=[],this.setup(b),this.valid?(this.getFramesUrls(),this.loadFrames(),this.run(),this):!1):!1}a.prototype.setup=function(a){this.speed=a&&parseInt(a.speed)||parseInt(this.element.getAttribute("data-animate-background-image-speed"))||200,this.baseUrl=a&&a.baseUrl||this.element.getAttribute("data-animate-background-image-base-url")||!1,this.framesCount=a&&parseInt(a.framesCount)||parseInt(this.element.getAttribute("data-animate-background-image-frames"))||!1,this.valid=this.speed&&this.baseUrl&&this.framesCount&&this.speed},a.prototype._getFrameUrlBuilder=function(){var a,b,c=this.element.getAttribute("data-animate-background-image-base-url");if(c&&c.length){var d=c.indexOf("${frame}");a=c.substring(0,d),b=c.substring(d+"${frame}".length)}return function(c){return b.length&&a.length?a+c+b:a.length?a+c:b.length?c+b:c}},a.prototype.getFramesUrls=function(){for(var a=this._getFrameUrlBuilder(),b=parseInt(this.element.getAttribute("data-animate-background-image-frames")),c=0;b>c;c++)this.framesUrls.push(a(c))},a.prototype.loadFrames=function(){for(var a=0;a<this.framesUrls.length;a++){var b=new Image;b.src=this.framesUrls[a],this.frames.push(b)}},a.prototype.run=function(){var b=this.visibleFrame+1<this.frames.length?this.visibleFrame+1:0;this.frames[b]&&this.frames[b].complete&&(this.element.style.backgroundImage="url("+this.framesUrls[b]+")",this.visibleFrame=b),setTimeout(function(){this.run()}.bind(this),this.speed)};var b=document.querySelectorAll("[data-animate-background-image]");if(b)for(var c=0;c<b.length;c++)new a(b[c]);window.animateBackgroundImages=function(b,c){return new a(b,c)}}();
